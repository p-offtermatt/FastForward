%% General typesetting
\newcommand{\eg}{\textit{e.g.}}
\newcommand{\ie}{\textit{i.e.}}
\newcommand{\etal}{\textit{et al.}}

%% General math
\usepackage{bm}                                       %% \bm
\usepackage{stmaryrd}                                 %% \llbracket, \rrbracket

\newcommand{\defeq}{\coloneqq}                        %% Definition operator
\newcommand{\N}{\mathbb{N}}                           %% Natural numbers
\newcommand{\Z}{\mathbb{Z}}                           %% Integers
\newcommand{\Q}{\mathbb{Q}}                           %% Rationals
\newcommand{\Qpos}{\Q_{>0}}                           %% Positive rationals
\newcommand{\Qnon}{\Q_{\geq 0}}                       %% Non neg. rationals
\newcommand{\sumnorm}[1]{\left\lVert#1\right\rVert_1} %% Sum-norm
\renewcommand{\vec}[1]{\bm{#1}}                       %% Vector notation
\newcommand{\mat}[1]{\mathbf{#1}}                     %% Matrix notation
\newcommand{\supp}[1]{\llbracket#1\rrbracket}         %% Vector support
\newcommand{\G}{\mathbb{G}}

%% Petri nets
\newcommand{\pre}[1]{\ensuremath{{^\bullet #1}}}
\newcommand{\post}[1]{\ensuremath{{#1^\bullet}}}
\newcommand{\areach}[2]{\xrightarrow{#2}_{#1}}        %% Template reach. rel
\newcommand{\reach}[1]{\areach{\N}{#1}}               %% Standard reach. rel
\newcommand{\creach}[1]{\areach{\Qnon}{#1}}           %% Continuous reach. rel.
\newcommand{\incid}{\ensuremath{\mathrm{Incid}}}      %% Incidence matrix
\newcommand{\guard}[1]{\vec{g}_{#1}}                  %% Transition pre-cond.
\newcommand{\effect}[1]{\vec{\Delta}_{#1}}            %% Transition net effect
\newcommand{\qreach}[1]{\areach{\Q}{#1}}              %% Q-reach. rel.
\newcommand{\zreach}[1]{\areach{\Z}{#1}}              %% Z-reach. rel.
\newcommand{\greach}[1]{\areach{\G}{#1}}              %% G-reach. rel.
\newcommand{\dreach}[1]{\areach{\D}{#1}}              %% Generic reach. rel.
\newcommand{\pn}{\mathcal{N}}                         %% Generic Petri net name

%% Algorithms
\newcommand{\astar}{$\textsf{A}^{\!*}$}

%% Plots
\newcommand{\plotscale}{0.77}
\newcommand{\covscale}{0.83}

% Colors

% Other tools



% Other colors (heuristics)
\colorlet{colqreach}{red}
\colorlet{colsyntactic}{black}

% Legends
\makeatletter
\newenvironment{customlegend}[1][]{%
    \begingroup
    % inits/clears the lists (which might be populated from previous
    % axes):
    \pgfplots@init@cleared@structures
    \pgfplotsset{#1}%
}{%
    % draws the legend:
    \pgfplots@createlegend
    \endgroup
}%
% makes \addlegendimage available (typically only available within an
% axis environment):
\def\addlegendimage{\pgfplots@addlegendimage}
\makeatother

\newcommand{\addlegend}[2]{\addlegendimage{col#1, fill=col#1, mark=#2}}

\newcommand{\addlegendmark}[2]{\addlegendimage{col#1, fill=col#1, only marks, mark=#2}}


%% Plot the line of a tool
\newcommand{\toolplot}[3]{%
  \addplot[very thick, color=col#1, mark=#2] coordinates {#3};%
}

%% plot with summary at the end of each line
\newcommand{\toolplotwithtotalcount}[6]{%
  \addplot[very thick, color=col#1, mark=#2] coordinates {#3};%
  \node[coordinate, label={[label distance=5pt]right:{\textcolor{col#1}{#6}}}]
       at (axis cs:#4, #5) {};
}

\newcommand{\comparisonplot}[3]{
  \begin{tikzpicture}[scale=\covscale, every node/.style={scale=\covscale}, font=\normalsize]%
    \begin{loglogaxis}[%
        xmin=50,
        xmax=100000,
        ymin=50,
        ymax=100000,
        width=1.1\textwidth,
        xlabel style={align=center},
        ylabel style={align=center},
        xticklabels={0, 0.1, 1, 10},
        yticklabels={0, 0.1, 1, 10},
        extra x ticks={60000},
        extra x tick label={60},
        extra y ticks={60000},
        extra y tick label={60},
        xlabel={#1},
        ylabel={#2},
        legend style={
          at={(0, 0.65)},
          anchor=west},
        reverse legend,
      ]%
      \addplot[mark=none] coordinates {(100,100) (60000, 60000)};
      \addplot[green!70!black, mark=none] coordinates {(60000,100) (60000, 60000)};
      \addplot[green!70!black, mark=none] coordinates {(100,60000) (60000, 60000)};

%% Negative instances      
#3

    \end{loglogaxis}%
  \end{tikzpicture}%
}

% histogram
\newcommand{\histogram}[3]{%
\begin{tikzpicture}[scale=0.39, every node/.style={scale=0.7}, font=\Huge]
\begin{axis}[
  ymin=0,
  xmin=-10, xmax=110,
  domain=0:105,
  xlabel=#1,
  ylabel=#2,
  area style
  ]
      #3%
  \end{axis}%
\end{tikzpicture}%
}

\newcommand{\heuristicplot}[3]{%
\begin{tikzpicture}[scale=0.7, every node/.style={scale=\plotscale}, font=\Large]
\begin{loglogaxis}[
  log basis y=10,
  log basis x=10,
  ymin=-2, ymax=52,
  xmax=-2, xmax=52,
  domain=0:50,
  xticklabels={0, 1, 10},
  yticklabels={0, 1, 10},
  extra x ticks={50},
  extra x tick labels={50},
  extra y ticks={50},
  extra y tick labels={50},
  xlabel=#1,
  ylabel=#2
  ]
      #3%
  \end{loglogaxis}%
\end{tikzpicture}%
}


%% Grid containing all tools
\newcommand{\plotcanvas}[3]{%
  \begin{tikzpicture}[scale=\plotscale, every node/.style={scale=\plotscale}, font=\large]%
    \begin{semilogxaxis}[%
        ymin=-0.1,
        xmin=90,
        xmax=60050,
        domain=100:60050,
        xtick={100, 500, 1500, 5000, 15000, 60000},
        xticklabels={0.1, 0.5, 1.5, 5, 15, 60},
        width=\textwidth,
        xlabel=#1,
        ylabel style={align=center},
        ylabel=#2,
        legend style={
          at={(0, 0.65)},
          anchor=west},
        reverse legend,
        clip=false
      ]%
      #3%
    \end{semilogxaxis}%
  \end{tikzpicture}%
}

\newcommand{\zeroeps}{0.6} %% Hack to emulate 0 tick on logscale...
\newcommand{\plotcanvaslog}[3]{%
  \begin{tikzpicture}[scale=\plotscale, every node/.style={scale=\plotscale}, font=\large]%
    \begin{loglogaxis}[%
        ymin=\zeroeps-0.1,
        xmin=90,
        xmax=60050,
        domain=100:60050,
        xtick={100, 500, 1500, 5000, 15000, 60000},
        xticklabels={0.1, 0.5, 1.5, 5, 15, 60},
        ytick={1, 10, 100},
        yticklabels={1, 10, 100},
        extra y ticks={\zeroeps},
        extra y tick labels={0},
        width=\textwidth,
        xlabel=#1,
        ylabel style={align=center},
        ylabel=#2,
        legend style={
          at={(0, 0.65)},
          anchor=west},
        reverse legend,
        clip=false
      ]%
      #3%
    \end{loglogaxis}%
  \end{tikzpicture}%
}

%% Uncomment to go back to linear scale!
%% \renewcommand{\zeroeps}{0}
%% \renewcommand{\plotcanvaslog}{\plotcanvas}

%% Grid containing all tools (longer timeout)
\newcommand{\plotcanvaslonger}[3]{%
  \begin{tikzpicture}[scale=\plotscale, every node/.style={scale=\plotscale}]%
    \begin{semilogxaxis}[%
        ymin=-1,
        xmin=90,
        xmax=600000,
        domain=100:600000,
        xtick={100, 500, 1500, 5000, 25000, 100000, 600000},
        xticklabels={0.1, 0.5, 1.5, 5, 25, 100, 600},
        width=\textwidth,
        xlabel=#1,
        ylabel style={align=center},
        ylabel=#2,
        legend style={
          at={(0, 0.65)},
          anchor=west},
        reverse legend,
        clip=false
      ]%
      #3%
    \end{semilogxaxis}%
  \end{tikzpicture}%
}

%% Code
\newcommand{\codeword}[1]{%
\texttt{\textcolor{red}{#1}}%
}

\newcommand{\code}[1]{%
\texttt{{#1}}%
}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}