%% General typesetting
\newcommand{\eg}{\textit{e.g.}\@\xspace}
\newcommand{\ie}{\textit{i.e.}\@\xspace}
\newcommand{\etal}{\textit{et al.}}
\newcommand{\tmp}[1]{\textcolor{red}{#1}}

%% General math
\newcommand{\defeq}{\coloneqq}                        %% Definition operator
\newcommand{\N}{\mathbb{N}}                           %% Natural numbers
\newcommand{\Z}{\mathbb{Z}}                           %% Integers
\newcommand{\Q}{\mathbb{Q}}                           %% Rationals
\newcommand{\R}{\mathbb{R}}                           %% Reals
\newcommand{\D}{\mathbb{D}}                           %% Generic domain
\newcommand{\Qpos}{\mathbb{Q}_{\ge 0}}                    %% Non neg. rationals
\newcommand{\mat}[1]{\mathbf{#1}}                     %% Matrix notation
\renewcommand{\vec}[1]{\bm{#1}}                       %% Vector notation
\newcommand{\transpose}{\mathsf{T}}                   %% Matrix transpose
\newcommand{\sol}[1]{\llbracket#1\rrbracket}          %% Set of solutions
\newcommand{\G}{\mathfrak{S}}
\newcommand{\I}{\mathfrak{I}}
\newcommand{\Pe}{\mathcal{P}}
\newcommand{\W}{\mathcal{W}}
\newcommand{\set}[1]{\{#1\}}
\newcommand{\ls}{<}
\newcommand{\gr}{>}

\newcommand{\Nn}{\N_{\geq 1}}

\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}


%% For vectors
\newcommand{\0}{\vec{0}}
\newcommand{\1}{\vec{1}}
\newcommand{\B}{\vec{B}}
\newcommand{\ttau}{\vec{\tau}}


% \newcommand{\Ball}{B_{\set{1,\dots,n}}}
\newcommand{\Ball}{B}

%%%%
% from https://tex.stackexchange.com/a/43009
\DeclarePairedDelimiter\abs{\lvert}{\rvert}%
\DeclarePairedDelimiter\norm{\lVert}{\rVert}%

% Swap the definition of \abs* and \norm*, so that \abs
% and \norm resizes the size of the brackets, and the 
% starred version does not.
\makeatletter
\let\oldabs\abs
\def\abs{\@ifstar{\oldabs}{\oldabs*}}
%
\let\oldnorm\norm
\def\norm{\@ifstar{\oldnorm}{\oldnorm*}}
\makeatother
%%%%

%% Complexity
\newcommand{\bigO}{\mathcal{O}}

%% Petri nets
\newcommand{\pn}{\mathcal{N}}                         %% Generic Petri net name
\newcommand{\trans}[1]{\xrightarrow{}^{#1}}              %% Reachability relation
\newcommand{\reach}{\trans{*}}                       %% Starred reachability
\newcommand{\ctrans}[1]{\xrightarrow{}_{\Qpos}^{#1}} %% Continuous reach. rel.
\newcommand{\creach}{\ctrans{*}}                   %% Starred continuous reach.
\newcommand{\ztrans}[1]{\xrightarrow{}_{\Z}^{#1}}  %% Continuous reach. rel.
\newcommand{\zreach}{\ztrans{*}}                   %% Starred int. reach.
\newcommand{\dtrans}[1]{\xrightarrow{}_{\D}^{#1}}  %% Generic reach. rel.
\newcommand{\dreach}{\dtrans{*}}                   %% Starred generic reach.

\newcommand{\effectt}{\delta_t}
\newcommand{\pre}[1]{{^\bullet #1}}
\newcommand{\post}[1]{{#1^\bullet}}
\newcommand{\pret}{\pre{t}}
\newcommand{\postt}{\post{t}}
\newcommand{\effect}[1]{\Delta(#1)}

\newcommand{\supppre}[1]{\support{^\bullet #1}}
\newcommand{\supppost}[1]{\support{#1^\bullet}}
\newcommand{\support}[1]{\mathrm{supp}(#1)}

\newcommand{\soundS}[1]{\mathcal{S}_{#1}}

\newcommand{\modp}{\% p}
\newcommand{\upk}{\leq k}

\newcommand{\Reach}[1]{\text{Reach}(#1)}        %% Reachable markings
\newcommand{\ZReach}[1]{\Z\text{-Reach}(#1)}    %% Reachable markings
\newcommand{\QReach}[1]{\Qpos\text{-Reach}(#1)} %% Reachable markings

% Runs
\newcommand{\parikh}[1]{\vec{#1}}
\newcommand{\FromTo}[3]{#1[#2:#3]}

% Continuous PN
%\newcommand{\ZeroOne}{\Q \cap (0,1]} % Continuous domain
\newcommand{\ZeroOne}{(0,1]} % Continuous domain

%% WF Nets
\newcommand{\initial}{\mathsf{i}}
\renewcommand{\output}{\mathsf{f}}

\newcommand{\m}{\vec{m}}
\newcommand{\n}{\vec{n}}
\newcommand{\bv}{\vec{v}}

\newcommand{\ssound}{supersound}
\newcommand{\f}{\output}
\newcommand{\imarked}[1]{\{\initial\colon #1\}}
\newcommand{\fmarked}[1]{\{\f\colon #1\}}
\newcommand{\omarked}[1]{\fmarked{#1}}
\newcommand{\marking}[1]{\text{marking}(#1)}
\newcommand{\imarking}[1]{\overline{\text{marking}}(#1)}

\newcommand{\sNums}[1]{\text{Sound}(#1)}
\newcommand{\sns}{\sNums{N}}

\newcommand{\csharp}{C\#}




%% Aligning texts properly
\newcommand{\textphantom}[2]{%
  \makebox[0pt][l]{#1}\phantom{#2}%
}

%% Colors
\newcommand{\phaseTwoColor}{green!50!black}
\newcommand{\phaseTwoIncColor}{green!50!blue}
\newcommand{\phaseTwoDecColor}{green!50!red}


%% ILPs
\newcommand{\solutions}[1]{\llbracket #1 \rrbracket}
\newcommand{\nsolutions}[1]{\llbracket #1 \rrbracket_{\geq 0}}

% Plotting
\newcommand{\plotscale}{0.9}

\newcommand{\plotcanvas}[4]{%
  \begin{tikzpicture}[font=\small, scale=\plotscale, transform shape]%
    \begin{axis}[%
        width=#4,
        xlabel=#1,
        legend pos=north west,
        ylabel=#2,
      ]%
      #3%
    \end{axis}%
  \end{tikzpicture}%
}

\newcommand{\plotcanvaswithextraargs}[5]{%
  \begin{tikzpicture}[font=\small]%
    \begin{axis}[%
        width=#4,
        xlabel=#1,
        legend pos=north west,
        ylabel=#2,
        #5
      ]%
      #3%
    \end{axis}%
  \end{tikzpicture}%
}

% Legends
\makeatletter
\newenvironment{customlegend}[1][]{%
    \begingroup
    % inits/clears the lists (which might be populated from previous
    % axes):
    \pgfplots@init@cleared@structures
    \pgfplotsset{#1}%
}{%
    % draws the legend:
    \pgfplots@createlegend
    \endgroup
}%
% makes \addlegendimage available (typically only available within an
% axis environment):
\def\addlegendimage{\pgfplots@addlegendimage}
\makeatother

\newcommand{\addlegend}[2]{\addlegendimage{col#1, fill=col#1, mark=#2}}

\newcommand{\addlegendmark}[2]{\addlegendimage{col#1, fill=col#1, only marks, mark=#2}}

\colorlet{colConti}{green!50!black}
\colorlet{colLola}{blue}
\colorlet{colWoflan}{orange}

\newcommand{\ourlegend}{\begin{tikzpicture}
  \begin{axis}[%
          hide axis,
          xmin=10,
          xmax=50,
          ymin=0,
          ymax=0.4,
          legend columns=4,
          legend style={draw=none, /tikz/every even column/.append style={column sep=0.5cm}}
      ]
      \addlegendimage{colConti,mark=*}
      \addlegendentry{This work};
      \addlegendimage{colLola,mark=square*}
      \addlegendentry{LoLA};
      \addlegendimage{colWoflan,mark=diamond*}
      \addlegendentry{Woflan};
  \end{axis}
\end{tikzpicture}}

\newcommand{\encpn}{\pn_\mathrm{enc}}
